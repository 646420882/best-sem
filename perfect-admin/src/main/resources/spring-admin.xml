<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"
       default-lazy-init="true">

    <import resource="spring-admin-security.xml"/>
    <import resource="spring-admin-mongodb.xml"/>
    <mvc:interceptors>
        <ref bean="adminPriviledgeHandler"/>
        <bean class="com.perfect.admin.filter.SystemLogHandler"/>
    </mvc:interceptors>


    <context:property-placeholder ignore-resource-not-found="true"
                                  location="classpath:mongodb.properties,classpath:redis.properties,classpath:elasticsearch.properties"/>


    <context:component-scan base-package="com.perfect">
        <!--<context:include-filter type="regex" expression="com.perfect.service.admin.*"/>-->
        <!--<context:exclude-filter type="regex" expression="com.perfect.dao.creative.*"/>-->
        <!--<context:exclude-filter type="regex" expression="com.perfect.db.elasticsearch.*"/>-->
        <context:exclude-filter type="regex" expression="com.perfect.service.impl.MaterialsScheduledService*"/>
        <context:exclude-filter type="regex" expression="com.perfect.commons.quartz.*"/>
    </context:component-scan>

    <bean id="adminPriviledgeHandler" class="com.perfect.admin.filter.AdminPriviledgeHandler"/>
</beans>